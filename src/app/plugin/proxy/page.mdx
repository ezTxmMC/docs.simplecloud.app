import {Button} from "../../../components/Button";
import {CodeGroup} from "../../../components/Code";
import {Note} from "../../../components/mdx";

export const metadata = {
    title: 'Proxy Plugin',
    description:
        'This proxy plugin provides a variety of features for MOTD and Tablist in your server network.',
}



# Proxy Plugin

The Proxy Plugin is a versatile tool designed to enhance your server network's ServerInfo and Tablist features. It offers a range of customization options to tailor these aspects to your specific needs. {{ className: 'lead' }}

<Button href="https://github.com/theSimpleCloud/proxy-plugin/releases" arrow="right">
    <>Download</>
</Button>

## Supported proxy versions
A list of all maintained implementations. If you find
your proxy in this list it means that your proxy is supported.

| Proxy type           | Proxy Plugin |
|----------------------|--------------|
| Velocity             | ✅            |
| BungeeCord and forks | ✅            |
| Other                | ❌            |


## Features
This plugin has many features for both Tablist and ServerInfo. Some features are limited to only work for only Tablist or ServerInfo.

| Feature                                    | Explanation                                                                                           | Tablist | ServerInfo |
|--------------------------------------------|-------------------------------------------------------------------------------------------------------|---------|------------|
| Customizable lines                         | Top and bottom line(s) are both customizable                                                          | ✅       | ✅          |
| Multi-Options                              | Multiple options can be provided for each line, with one randomly selected for display                | ❌       | ✅          |
| Customizable PlayerInfo and server version | PlayerInfo and server version details can be personalized according to user preferences               | ❌       | ✅          |
| Dynamic maximum player count               | The maximum number of players can be updated dynamically and can be configured within a certain range | ✅       | ✅          |
| Support for Adventure MiniMessage format   | Configurations are formatted using Adventure [MiniMessage](https://docs.advntr.dev/minimessage)       | ✅       | ✅          |
| Placeholders                               | Placeholders are documented [here](#placeholders)                                                     | ✅       | ✅          |
| Customizable update interval               | Enables you to change the time between Tablist updates                                                | ✅       | ❌          |
| Animated header and footer                 | The header and footer can display dynamic animations                                                  | ✅       | ❌          |
| Appearance based on server names or groups | Enables the player to have different appearance when playing on different child servers               | ✅       | ❌          |

## Configuration

The plugin is configured via the files `motd.yml` and `tablist.yml`. In these files you will find all the options for customizing ServerInfo and Tablist.
You can use [placeholders](#placeholders) as well.

<Note>Config examples are yet to be added.</Note>

## Placeholders
Placeholders can be used in their respective configuration to make the displaying of dynamic properties possible.
Some Placeholders are only available for the Tablists configuration.
| Placeholder        | Tablist / `tablist.yml` | ServerInfo / `motd.yml` | Description                           |
|--------------------|---------|------|---------------------------------------|
| `%ONLINE_PLAYERS%` | ✅     | ✅  | The currently online players          |
| `%MAX_PLAYERS%`    | ✅     | ✅  | The networks maximum online players   |
| `%SERVER_NAME%`    | ✅     | ❌   | The server the player is currently on |
| `%CURRENT_TIME%`   | ✅     | ❌   | The current time                      |
| `%CURRENT_DATE%`   | ✅     | ❌   | The current date                      |
| `%PING%`           | ✅     | ❌   | The players ping                      |

## API usage

The plugin offers an API for enabling interaction with the ServerInfo and Tablist by other plugins. This API is accessible for both BungeeCord/Waterfall and Velocity.

You can utilize either the `MotdConfigurationEvent` or `TablistConfigurationEvent` to make updates to the ServerInfo or Tablist. These events encapsulate the configuration object, allowing for modifications.

In the case of the Tablist event, you can customize the header and footer of the Tablist. Velocity is employed in this example.

<CodeGroup>
    ```java {{title: 'Java'}}
        @Subscribe
        public void onTablistConfiguration(TablistConfigurationEvent event) {
            TablistConfiguration TablistConfiguration = event.getTablistConfiguration();
            Component header = TablistConfiguration.getHeader();
            header = header.replaceText(TextReplacementConfig.builder().match("%MY_FUNNY_PLACEHOLDER%").replacement("<red>Test" + 123).build());
            TablistConfiguration.setHeader(header);

            Component footer = TablistConfiguration.getFooter();
            footer = footer.replaceText(TextReplacementConfig.builder().match("%MY_FUNNY_PLACEHOLDER%").replacement("<red>Test" + 123).build());
            TablistConfiguration.setFooter(footer);
        }
    ```
    ```kotlin {{title: 'Kotlin'}}
        fun onTablistConfiguration(event: TablistConfigurationEvent) {
            var header = event.TablistConfiguration.header
            header = header.replaceText(TextReplacementConfig.builder().match("%MY_FUNNY_PLACEHOLDER%").replacement("<red>Test" + 123).build())
            event.TablistConfiguration.header = header

            var footer = event.TablistConfiguration.footer
            footer = footer.replaceText(TextReplacementConfig.builder().match("%MY_FUNNY_PLACEHOLDER%").replacement("<red>Test" + 123).build())
            event.TablistConfiguration.footer = footer
        }
    ```
</CodeGroup>
