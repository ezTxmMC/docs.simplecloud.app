import {Button} from "../../../components/Button";
import {CodeGroup} from "../../../components/Code";
import {Note} from "../../../components/mdx";

export const metadata = {
    title: 'Proxy Plugin',
    description:
        'This proxy plugin provides a variety of features for MOTD and TabList in your server network.',
}


<Button href="https://github.com/theSimpleCloud/proxy-plugin/releases" arrow="right">
    <>Download</>
</Button>

# Proxy Plugin

The Proxy Plugin is a versatile tool designed to enhance your server network's Message of the Day (MOTD) and TabList features. It offers a range of customization options to tailor these aspects to your specific needs. {{ className: 'lead' }}

## Supported proxy versions

| proxy type | Proxy Plugin |
|------------|--------------|
| Velocity   | ✅            |
| BungeeCord | ✅            |
| Other      | ❌            |


## Features

### MOTD

| Features                                   | Explanation                                                                                           |
|--------------------------------------------|-------------------------------------------------------------------------------------------------------|
| Configurable MOTD                          | You can customize both the first and second line of the message of the day (MOTD)                     |
| Multi-Options                              | Multiple options can be provided for each line, with one randomly selected for display                |
| Customizable PlayerInfo and server version | PlayerInfo and server version details can be personalized according to user preferences               |
| Dynamic maximum player count               | The maximum number of players can be updated dynamically and can be configured within a certain range |
| Support for Adventure Minimessage format   | Configurations are formatted using Adventure [MiniMessage](https://docs.advntr.dev/minimessage)       |
| Placeholders                               | see [here](#placeholders)                                                                             |

### TabList

| Features                                 | Explanation                                                                                     |
|------------------------------------------|-------------------------------------------------------------------------------------------------|
| Customizable update interval             | Enables you to change the time between tablist updates                                          |
| Animated header and footer               | The header and footer can display dynamic animations                                            |
| TabList based on server names or groups  | Enables you to have different looking TabLists on different servers                             |
| Support for Adventure Minimessage format | Configurations are formatted using Adventure [MiniMessage](https://docs.advntr.dev/minimessage) |
| Placeholders                             | see [here](#placeholders)                                                                       |

## Installation

1. [Download the plugin](https://github.com/theSimpleCloud/proxy-plugin/releases)
2. Move the file`proxy-velocity.jar` or`proxy-bungeecord.jar` into the plugin folder of your proxy.
3. Restart your proxy.
4. Customize the`motd.yml` and`tablist.yml` files to match your preferences.
5. Restart the proxy once more.

## Configuring

The plugin is configured via the files `motd.yml` and `tablist.yml`. In these files you will find all the options for customizing MOTD and TabList.

<Note>TODO: add config samples</Note>

## Placeholders
Placeholders can be used in their respective configuration to make the displaying of dynamic properties possible.
Some Placeholders are only available for the TabLists configuration.
| Placeholder        | TabList / `tablist.yml` | MOTD / `motd.yml` | Description                           |
|--------------------|---------|------|---------------------------------------|
| `%ONLINE_PLAYERS%` | ✅     | ✅  | The currently online players          |
| `%MAX_PLAYERS%`    | ✅     | ✅  | The networks maximum online players   |
| `%SERVER_NAME%`    | ✅     | ❌   | The server the player is currently on |
| `%CURRENT_TIME%`   | ✅     | ❌   | The current time                      |
| `%CURRENT_DATE%`   | ✅     | ❌   | The current date                      |
| `%PING%`           | ✅     | ❌   | The players ping                      |

## API usage

The plugin offers an API for enabling interaction with the MOTD and TabList by other plugins. This API is accessible for both BungeeCord/Waterfall and Velocity.

You can utilize either the `MotdConfigurationEvent` or `TabListConfigurationEvent` to make updates to the MOTD or TabList. These events encapsulate the configuration object, allowing for modifications.

In the case of the TabList event, you can customize the header and footer of the TabList. Velocity is employed in this example.

<CodeGroup>
    ```java {{title: 'Java'}}
        @Subscribe
        public void onTabListConfiguration(TabListConfigurationEvent event) {
        TabListConfiguration tabListConfiguration = event.getTabListConfiguration();
        Component header = tabListConfiguration.getHeader();
        header = header.replaceText(TextReplacementConfig.builder().match("%MY_FUNNY_PLACEHOLDER%").replacement("<red>Test" + 123).build());
        tabListConfiguration.setHeader(header);

        Component footer = tabListConfiguration.getFooter();
        footer = footer.replaceText(TextReplacementConfig.builder().match("%MY_FUNNY_PLACEHOLDER%").replacement("<red>Test" + 123).build());
        tabListConfiguration.setFooter(footer);
        }
    ```
    ```kotlin {{title: 'Kotlin'}}
        fun onTabListConfiguration(event: TabListConfigurationEvent) {
        var header = event.tabListConfiguration.header
        header = header.replaceText(TextReplacementConfig.builder().match("%MY_FUNNY_PLACEHOLDER%").replacement("<red>Test" + 123).build())
        event.tabListConfiguration.header = header

        var footer = event.tabListConfiguration.footer
        footer = footer.replaceText(TextReplacementConfig.builder().match("%MY_FUNNY_PLACEHOLDER%").replacement("<red>Test" + 123).build())
        event.tabListConfiguration.footer = footer
        }
    ```
</CodeGroup>
