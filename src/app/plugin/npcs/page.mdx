import {Button, DangerNote, Note} from "../../../components/mdx";

export const metadata = {
    title: 'NPCs Plugin',
    description: 'Create NPCs through which you can access other subservers'
}

# NPCs Plugin
Create NPCs on your server that allow your players to access other subservers through the NPCs.
Perform various [actions](#understanding-actions) such as sending messages, titles, action bars, or sounds, or customize inventories with your items. 
Use your [favourite NPC system](#usage-of-other-npc-plugins) or use the plugin as a standalone with its own NPC integration.
The all new NPC plugin opens up limitless creative possibilities.

<Button href="https://github.com/theSimpleCloud/npc-plugin/releases" arrow="right">
    <>Download</>
</Button>

## Supported Server Softwares

The following table shows all currently supported server implementations:

| Server type    | This Plugin |
|----------------|-------------|
| Paper & Forks  | Yes         |
| Spigot & Forks | Yes         |
| Other          | No          |

## Quick Setup

1. Download the plugin
2. Optional: Download a supported NPC software from [here](#usage-of-other-npc-plugins)
3. Place it in your server's plugins folder
4. Start your server

## Usage of other NPC plugins
You don't want to use our own [NPC implementation](https://github.com/juliarn/npc-lib)?
No problem! Thanks to the new structure, you can also use other NPC plugins such as Citizens.
This allows you to use all the features of your NPC plugin together with the functions of SimpleCloud.
The following NPC plugins are supported:

| Plugin                                                                                | Supported Versions      | This Plugin |
|---------------------------------------------------------------------------------------|-------------------------|-------------|
| [Citizens](https://citizensnpcs.co)                                                   | 1.19 - latest version   | Yes         |
| [FancyNpcs](https://fancyplugins.de/FancyNpcs)                                        | 1.19.4 - latest version | Yes         |
| [PlayerNPC](https://www.spigotmc.org/resources/✅-api-player-npc-✅-1-17-1-20-1.93625/) | 1.17.1 - 1.20.1         | Yes         |

If you would like to add support for a missing npc plugin, feel free to submit a issue on [GitHub](https://github.com/theSimpleCloud/npc-plugin/pulls).

<Note>
    As you have installed one of the supported NPC plugins on your server, the system automatically takes over the appropriate implementation. You don't have to do anything else!
</Note>

## Understanding Actions
Actions allow you to interact with NPCs and set the trigger of an action individually.
Each action has its own option with which you can customise it. Exactly as required for your NPC.
Here you will find all available actions and their options:

| Action                | Option                 | Description                                                  |
| --------------------- | ---------------------- | ------------------------------------------------------------ |
| `open_inventory`      | inventory.name         | Open an inventory to select a server                         |
| `run_command`         | command.name           | Execute a command via the player                             |
| `run_console_command` | command.name           | Execute a command via the console                            |
| `connect_to_server`   | server.name            | Send a player to a server                                    |
| `transfer_to_server`  | server.ip, server.port | Send a player to an external server with the transfer method |


## Commands
| Command                                               | Description                                            |
| ----------------------------------------------------- | ------------------------------------------------------ |
| `/scnpc create <name>`                                | Create a NPC with our own NPC implementation           |
| `/scnpc <id> interact <type> setAction <action>`      | Set Actions, type can be `right_click` or `left_click` |
| `/scnpc <id> interact <type> setOption <key> <value>` | Set options, type can be `right_click` or `left_click` |

## Creating a NPC

First, make sure that the NPC plugin is installed on your server, and if you want to use a supported NPC system, ensure that it is also installed on the server.

The first step is to create an NPC. If you're using a supported NPC system, refer to the documentation of the respective plugins. 
- [Create a NPC using Citizens](https://wiki.citizensnpcs.co/Commands)
- [Create a NPC using FancyNpcs](https://fancyplugins.de/docs/fn-getting-started.html#create-your-first-npc)
- [Create a NPC using PlayerNPC](https://www.spigotmc.org/resources/%E2%9C%85-api-player-npc-%E2%9C%85-1-17-1-20-1.93625/)

If you want to use our NPC plugin as a standalone, create an NPC with the following command:
```bash
/scnpc create <name>
```


### NPC Configuration
When you create an NPC using our plugin or another plugin, a separate configuration for each new NPC will be generated in the plugin folder.

```yaml
id: bedwars
actions:
  - player-interaction: !!app.simplecloud.npc.shared.action.interaction.PlayerInteraction "LEFT_CLICK"
    action: !!app.simplecloud.npc.shared.action.Action "OPEN_INVENTORY"
    options:
      - key: inventory.name
        value: quickjoin.bedwars
      - key: play.sound
        value: block.chest.open
      - key: sound.pitch
        value: "3"
      - key: sound.volume
        value: "2"
  - player-interaction: !!app.simplecloud.npc.shared.action.interaction.PlayerInteraction "RIGHT_CLICK"
    action: !!app.simplecloud.npc.shared.action.Action "TRANSFER_TO_SERVER"
    options:
      - key: server.ip
        value: demo-server.com
      - key: server.port
        value: "25565"
      - key: send.actionbar
        value: abda
options:
  - key: send.message
    value: global message gesendet für beide
  - key: send.title
    value: title
  - key: send.subtitle
    value: subtitle
```
Configure the NPC either in the NPC configuration file or through commands. 
The configuration will be automatically reloaded if any changes are made to the file.
If you want to configure the NPC using commands, use either `/scnpc <id> interact <type> setAction <action>` or `/scnpc <id> interact <type> setOption <key> <value>`.


Options are sent as feedback when an action is performed. You can set the following options:
| Option key       | Description                     |
| ---------------- | ------------------------------- |
| `send.message`   | Sends a message                 |
| `send.actionbar` | Sends a message as an actionbar |
| `send.title`     | Sends a title                   |
| `send.subtitle`  | Sends a subtitle                |
| `play.sound`     | Plays a sound                   |

// Gif 

### Configure Inventories
If you specify the action `OPEN_INVENTORY`, you need to reference an inventory from the plugin folder under `inventories/`. Configure inventories in the configuration file as follows:
```yaml
// Inventory Config
```

// Image Inventory

### Configure Holograms
If you want to create a hologram above the NPC, use our [Placeholders plugin](/plugin/placeholder).

// Gif Preview

## What's Next?

- [Placeholder Plugin](/plugin/placeholder)
